require(["utils/paymenttypeutils","utils/paymentutils","utils/paypageutils","utils/localconfigutils","../global-payment/script/global-payment-utils"],function(k,b,c,f,m){function g(){var d=!1,l=!0,g=-1<window.location.search.indexOf("showPreviousError=true");$.ajax({url:"/payment/client",type:"GET",async:!0,data:{showPreviousError:g},success:function(a){m.onLanding(c,b);"true"===a.showPreviousError&&""<a.actionError&&b.error(a.actionError);if(b.isNotBlankURL(a.redirectURL))return window.location.href=
a.redirectURL,!1;$("#backLink").attr("href",a.returnURL);f.hideForGuest(a.isGuest);$("#pageTitle").html(a.pageTitle);var e="";b.hasEmailAndNotGuest(a)&&(e=" "+a.custEmail);$("#mgolegacy-titles").hide();$("#titles").show();"false"===a.isGuest&&(e+=' <a tabindex="112" class="inline-link" href="/payment/LeaveEnclave?url=editMyProfileUrl">Edit My Profile</a>');$("#full-text").html(a.instructionText+e);b.toggleStatusBar(a);k.adjustStatusBar(a);k.displayDisc(a);$("#custEmail").html(a.custEmail);
$("#orderTotal").html(b.formattedAmount(a.orderTotal));b.toggleCartContents(a);b.toggleSubtotalAndShippingCost(a);$("#ppText").show();d=k.displayPaymentTypes(a,d);$("#privacy-policy").html("*"+a.acceptanceHTML);e=$("#continueLink");e.html(a.payBtnCaption);e.addClass("btn-primary");e.addClass(a.payBtnClass);b.hideCards();var h=$("#usecc");b.displayType(a,h,c);var g=$("#useMyProfile");b.profileAndBilling(a,g);b.updateSavingStatus(a.isStoringCard)&&(d=!0);b.setDisplay($("#saveCard"),b.isSaveCardDisplayable(a));
b.useCCListener(h,d,a,l,c);c.addNewCardListener(a,b);b.saveCardListener(a,f);d=b.addCardListener(a,d);$("#state-address").on("change",function(){b.toggleUrban("PR"===$("#state-address").val())});b.continueLinkListener(e,a,"We were unable to process your request. Please correct the error(s) indicated below.",c);b.submitListener("We were unable to process your request. Please correct the error(s) indicated below.",c,f);c.openPanelIfOne(a,h);b.toggleBilling(a,f);b.agreementListener(f);l=b.onLoadView(l,
h,a);b.addNewListeners();b.setDisplay($("#urbanWrapper"),"PR"===$("#state-address").val());b.isSaveCardDisplayable(a)&&f.showForDisplayable();b.setCardHolderName(a);b.getVisaCheckoutUrl(a);"true"===a.lockedAccount&&b.lockAccount(a);f.buttonListener($("#backLink").attr("id"));c.checkLoaded(a,c)},error:function(){window.location.href="/pay/sessionExpired.html"}})}try{g(),$("#pageTitle").focus()}catch(d){jsLogAndRedirect("callClient error on checkout: "+d.message)}});
//# sourceMappingURL=checkout.js.map