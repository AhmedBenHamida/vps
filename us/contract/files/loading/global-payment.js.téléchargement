var blueSpinner,whiteSpinner,blueSpinCounter,whiteSpinCounter,sessionRefreshURL="/payment/reg/SessionRefresh",sessionTimeoutURL="/payment/reg/SessionExpired",systemErrorURL="/pay/systemError.html",sessionRefreshTickRate=100,sessionRefreshDisplayTime=12E4,sessionTimeout=765E3,showSessionRefreshTimeoutId,sessionRefreshTickId,sessionRefreshTimeout,payframeClient,$targetCard=null;
function getPayframeCallback(a){return function(b){jsLog("Logging complete eProtect response: "+JSON.stringify(b));if(void 0!==b.timeout)$("#paypageCode").val("TIMEOUT"),$("#paypageMessage").val("Request timed out."),$("#"+a).submit();else if("884"!==b.response){$("#paypageCode").val(b.response);$("#paypageMessage").val(b.message);$("#paypageResponseTime").val(b.responseTime);$("#paypageLitleTxnId").val(b.litleTxnId);void 0!==b.type&&$("#paypageType").val(b.type);void 0!==b.firstSix&&$("#paypageBin").val(b.firstSix);
void 0!==b.lastFour&&$("#paypageLastFour").val(b.lastFour);$("#paypagePaypageRegistrationId").val(b.paypageRegistrationId);if(visaCheckoutDataCheck(b)){var c=b.visaCheckoutResponse.paymentInstrument.billingAddress;b=b.visaCheckoutResponse.paymentInstrument.expirationDate;$("#card-holder-name").val(c.personName);$("#street-address").val(c.line1);$("#apt-suite-address").val(c.line2);$("#city-address").val(c.city);$("#state-address").val(c.stateProvinceCode);$("#zipcode-address").val(c.postalCode);$("#profile-info").hasClass("checked")&&
$("#profile-info").removeClass("checked");$("#card-expire-date").val(b.month+"/"+b.year)}$("#"+a).submit()}}}
function getPayframeCallbackAP(a,b){return function(c){jsLog("Logging complete eProtect response: "+JSON.stringify(c));void 0!==c.timeout?(b.completePayment(ApplePaySession.STATUS_FAILURE),$("#paypageCode").val("TIMEOUT"),$("#paypageMessage").val("Request timed out."),$("#"+a).submit()):"884"===c.response?b.completePayment(ApplePaySession.STATUS_FAILURE):($("#paypageCode").val(c.response),$("#paypageMessage").val(c.message),$("#paypageResponseTime").val(c.responseTime),$("#paypageLitleTxnId").val(c.vantivTxnId),
$("#paypagePaypageRegistrationId").val(c.paypageRegistrationId),void 0!==c.type&&$("#paypageType").val(c.type),void 0!==c.firstSix&&$("#paypageBin").val(c.firstSix),void 0!==c.lastFour&&$("#paypageLastFour").val(c.lastFour),void 0!==c.expDate&&4===c.expDate.length&&$("#card-expire-date").val(c.expDate.substr(0,2)+"/"+c.expDate.substr(2,2)),void 0!==c.message&&"Success"===c.message&&b.completePayment(ApplePaySession.STATUS_SUCCESS),$("#"+a).submit())}}
function visaCheckoutDataCheck(a){var b=void 0!==a.visaCheckoutResponse&&null!=a.visaCheckoutResponse;return b=(b=(b=b&&void 0!==a.visaCheckoutResponse.paymentInstrument&&null!=a.visaCheckoutResponse.paymentInstrument)&&void 0!==a.visaCheckoutResponse.paymentInstrument.billingAddress&&null!=a.visaCheckoutResponse.paymentInstrument.billingAddress)&&void 0!==a.visaCheckoutResponse.paymentInstrument.expirationDate&&null!=a.visaCheckoutResponse.paymentInstrument.expirationDate}
function prepPaypage(a,b){void 0===$("#paypageFrame")||$("#paypageFrame");var c=getPayframeCallback(a);b.callback=c;"undefined"!==typeof LitlePayframeClient&&(payframeClient=new LitlePayframeClient(b),this.addTitle("Credit card number and security code"),this.setTabindex("215"))}function addTitle(a){$("#vantiv-payframe").attr("title",a)}function setTabindex(a){$("#vantiv-payframe").attr("tabindex",a)}
function showErrors(a){a.actionError&&(closeWhiteSpinner(),$("#actionErrors").removeClass("hide"),$("#actionError").text(a.actionError));if(a.fieldErrors){closeWhiteSpinner();for(var b in a.fieldErrors)a.fieldErrors.hasOwnProperty(b)&&($("#actionErrors").removeClass("hide"),$("#actionError").text("We were unable to process your request. Please correct the error(s) indicated below."),$(".hasError-"+b).addClass("has-error"),$(".hasError-"+b).addClass("error"),$("#hasFieldError-"+b).removeClass("hide"),
$("#fieldError-"+b).text(a.fieldErrors[b]))}}function clearErrors(a){$("#actionErrors").addClass("hide");$("#actionError").text("");for(var b in a)a.hasOwnProperty(b)&&($(".hasError-"+a[b]).removeClass("has-error"),$(".hasError-"+a[b]).removeClass("error"),$("#"+a[b]).removeClass("error"),$("#hasFieldError-"+a[b]).removeClass("hide"),$("#fieldError-"+a[b]).text(""))}
function submitPaypage(){var a={id:$("#paypageMerchantTxnId").val(),orderId:$("#paypageOrderId").val()};payframeClient.getPaypageRegistrationId(a)}function xmlToString(a){return window.ActiveXObject?a.xml:(new XMLSerializer).serializeToString(a)}function resetSessionTimer(){clearTimeout(sessionRefreshTickId);clearTimeout(showSessionRefreshTimeoutId);showSessionRefreshTimeoutId=sessionRefreshTickId=null;addSessionRefreshTimer()}
function showSessionRefresh(){$("#session-expiring").is(":visible")||(openSessionExpirationModal(),clearTimeout(showSessionRefreshTimeoutId),$("#stayalive").show(),$("#btn-primary").show(),sessionRefreshTimeout=(new Date).getTime()+sessionRefreshDisplayTime,sessionRefreshTick(),sessionRefreshTickId=setTimeout("sessionRefreshTick()",sessionRefreshTickRate),$(".btn-primary").on("click",function(a){a.preventDefault();closeSessionExpirationModal();$.ajax({url:sessionRefreshURL,success:function(a){-1<
xmlToString(a).indexOf("expired")&&(window.location=sessionTimeoutURL)},error:function(){window.top.location.href=systemErrorURL}});resetSessionTimer()}))}
function sessionRefreshTick(){var a=sessionRefreshTimeout-(new Date).getTime(),b=$("#sessionCountdown");if(0<a){var c=Math.floor(a/1E3)%60,a=Math.floor(Math.floor(a/1E3)/60);0<a?b.html("will expire in "+a+" minutes  and "+c+" seconds"):b.html("will expire in "+c+" seconds");"undefined"!==typeof sessionRefreshTickId&&clearTimeout(sessionRefreshTickId);sessionRefreshTickId=setTimeout("sessionRefreshTick()",sessionRefreshTickRate)}else b.html("has expired"),$("#stayalive").hide(),$("#btn-primary").hide(),
closeSessionExpirationModal(),window.location=sessionTimeoutURL}function addSessionRefreshTimer(){clearTimeout(showSessionRefreshTimeoutId);showSessionRefreshTimeoutId=null;clearTimeout(sessionRefreshTickId);sessionRefreshTickId=null;showSessionRefreshTimeoutId=setTimeout("showSessionRefresh();",sessionTimeout)}
function openWhiteSpinner(){$(".white-spinner-wrapper").show();$("html").css("overflow","hidden !important");$("#wspinner-header").focus();whiteSpinCounter=0;whiteSpinner=setInterval(function(){var a=$(".white-spinner-progress .j-spinner img");a.eq(whiteSpinCounter).addClass("visible");0<whiteSpinCounter&&a.eq(whiteSpinCounter-1).removeClass("visible");0===whiteSpinCounter&&a.eq(9).removeClass("visible");whiteSpinCounter+=1;9<whiteSpinCounter&&(whiteSpinCounter=0)},500)}
function openSessionExpirationModal(){var a=$("#session-expiring");a.addClass("in");a.css("display","block");a.css("background","rgba(0,0,0,0.5)");a.focus()}function closeSessionExpirationModal(){$("#session-expiring").removeClass("in");$("#session-expiring").hide()}
function closeWhiteSpinner(){$(".white-spinner-wrapper").hide();clearInterval(whiteSpinner);$(".white-spinner-progress .j-spinner img").removeClass("visible");$(".white-spinner-progress .j-spinner img").eq(0).addClass("visible");window.scrollTo(0,0)}
function openBlueSpinner(){$(".white-overlay").show();$("#spinner-header").focus();blueSpinCounter=0;blueSpinner=setInterval(function(){var a=$(".blue-spinner-progress .j-spinner img");a.eq(blueSpinCounter).addClass("visible");0<blueSpinCounter&&a.eq(blueSpinCounter-1).removeClass("visible");0===blueSpinCounter&&a.eq(9).removeClass("visible");blueSpinCounter+=1;9<blueSpinCounter&&(blueSpinCounter=0)},500)}
function closeBlueSpinner(){$(".white-overlay").hide();clearInterval(blueSpinner);$(".blue-spinner-progress .j-spinner img").removeClass("visible");$(".blue-spinner-progress .j-spinner img").eq(0).addClass("visible");window.scrollTo(0,0)}
function documentReadyListener(){$(document).ready(function(){$(".global-add-card-btn").click(function(){$(".global-add-card-btn").hide();$(".global-pymt-info-inputs").hide();$("input[type=radio][name=stored-card-radio]").prop("checked",!1)});$('.container-fluid a[href="#"]').click(function(a){a.preventDefault()});$("[type=checkbox]").change(function(){var a=this.checked?!0:!1;$(this).attr("aria-checked",a);$(this).siblings(".checkbox").attr("aria-checked",a)})})}
function showCard(a,b,c){var d=$("#newcardpanel"),f=$(".global-add-card-btn"),e="";a?(e="one",a=["two","three"]):b?(e="two",a=["one","three"]):c?(e="three",a=["one","two"]):a=["one","two","three"];$(".security-code-card-"+a[0]+", .security-code-card-"+a[1]).prop("readonly",!0);$(".security-code-card-"+e).prop("readonly",!1);f.show();d.removeClass("show")}
function cvvEnablerListener(){$(document).ready(function(){$(".security-code-card-two, .security-code-card-three").prop("readonly",!0);$(".security-code-card-one").prop("readonly",!0);$(function(){$(".card-one, .card-two, .card-three").change(function(){$(".card-one").is(":checked")&&showCard(!0,!1,!1);$(".card-two").is(":checked")&&showCard(!1,!0,!1);$(".card-three").is(":checked")&&showCard(!1,!1,!0)})})})}
function useCreditCardListener(){$(".credit-radio-container input").on("change",function(){var a=$("#continueContainer"),b=$(".credit-card-container"),c=$("#cardtype1"),d=$("#visaCheckoutContainer");$(".global-paypal-radio").is(":checked")?(b.hide(),$("#storedMsg").hide(),a.toggle(!0),d.toggle(!1)):$(".global-visa-checkout-radio").is(":checked")?(b.hide(),$("#storedMsg").hide(),c.prop("checked",!1),$("#cardtype2").prop("checked",!1),$("#cardtype3").prop("checked",!1),a.toggle(!1),d.toggle(!0)):(b.show(),
c.prop("checked",c.is(":visible")),a.toggle(!0),d.toggle(!1))})}function saveCreditCardListener(){$(document).ready(function(){$(".global-add-card-btn").click(function(){$("#newcardpanel").addClass("show");var a=0;$(".global-storedcard-wrapper").each(function(){"none"!==$(this).css("display")&&a++});2<a&&($("#savecard").hide(),$("#preferredcard").hide(),$(".nickname-container").hide())})})}
function addCreditCardListener(){$(document).ready(function(){$(".stored-card-remove").click(function(){$targetCard=$(this);$("#delete-stored-card-confirmation-modal").modal();return!1});$("#delete-card-confirmation").click(function(){$("#delete-stored-card-confirmation-modal").modal("hide");openWhiteSpinner();window.$targetCard&&$.ajax({url:$targetCard.attr("href"),type:"GET",dataType:"JSON",async:!0,success:function(a){if("SUCCESS"===a.status)if(-1!==window.location.href.indexOf("manageAccounts")){a=
$targetCard.attr("id");a=a.substr(a.length-1);$("#sa"+a).remove();var b=0;$(".stored-card-wrapper").each(function(){"none"!==$(this).css("display")&&b++});3===b?$(".stored-credit-cards-limit").show():$(".stored-credit-cards-limit").hide();3>b?$("#stored-card-add-btn").show():$("#stored-card-add-btn").hide();0===b&&($("#noCardHeader").show(),$("#dividerHeader").show())}else $("#cancelbtn").trigger("click");closeWhiteSpinner()},error:function(){closeWhiteSpinner()}})});3>$(".stored-card").length&&$(".add-btn-holder").show()})}
function differentAddressListener(){$(document).ready(function(){$(".different-address").click(function(){$(".different-address").hide();$(".enter-new-address").show();$(".new-address-instructions").show();$("input[type=radio][name=different-address-radio-btn]").prop("checked",!1)})})}function outsideModalBlockListener(){$(".stored-card-remove").click(function(){$("#delete-stored-card-confirmation-modal").modal({backdrop:"static"})})}
function enableSessionExpirationModal(){$(document).ready(function(){addSessionRefreshTimer()})}function jsLogAndRedirect(a){$.ajax({url:"/payment/configuration/jslogger",type:"POST",data:{message:a},complete:function(){window.top.location.href=systemErrorURL}})}function jsLog(a){$.ajax({url:"/payment/configuration/jslogger",type:"POST",data:{message:a}})}
(function(a){"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?module.exports=a(require()):a(jquery)})(function(){var a={mobileWidth:768,scrollPos:0};a.lastButtonBeforeModal;a.editScreenOpen=!1;documentReadyListener();cvvEnablerListener();useCreditCardListener();saveCreditCardListener();addCreditCardListener();differentAddressListener();outsideModalBlockListener();var b=window.location.search;(b=(b=-1===b.indexOf("modal=y")&&-1===b.indexOf("modal=Y"))||-1===window.location.href.indexOf("manageAccount.html"))&&
enableSessionExpirationModal();$(document).ready(function(){openWhiteSpinner()});$(document).ready(function(){openBlueSpinner()});$(document).ready(function(){var a=[];(function(){for(var b=0;b<arguments.length;b++)a[b]=new Image,a[b].src=arguments[b]})("images/blue-spinner-processing-step-01.svg","images/blue-spinner-processing-step-02.svg","images/blue-spinner-processing-step-03.svg","images/blue-spinner-processing-step-04.svg","images/blue-spinner-processing-step-05.svg","images/blue-spinner-processing-step-06.svg",
"images/blue-spinner-processing-step-07.svg","images/blue-spinner-processing-step-08.svg","images/blue-spinner-processing-step-09.svg","images/blue-spinner-processing-step-10.svg","images/white-spinner-processing-step-01.svg","images/white-spinner-processing-step-02.svg","images/white-spinner-processing-step-03.svg","images/white-spinner-processing-step-04.svg","images/white-spinner-processing-step-05.svg","images/white-spinner-processing-step-06.svg","images/white-spinner-processing-step-07.svg",
"images/white-spinner-processing-step-08.svg","images/white-spinner-processing-step-09.svg","images/white-spinner-processing-step-10.svg")});return a});
//# sourceMappingURL=global-payment.js.map