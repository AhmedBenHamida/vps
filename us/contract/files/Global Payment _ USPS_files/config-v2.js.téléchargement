!function(){var e={6167:function(e){e.exports=function(e){if(Array.isArray(e))return e}},875:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},948:function(e){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},9501:function(e){e.exports=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}}},8447:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},4203:function(e,t,n){var o=n(6167),r=n(9501),a=n(8447);e.exports=function(e,t){return o(e)||r(e,t)||a()}},7358:function(e,t,n){var o=n(6167),r=n(948),a=n(8447);e.exports=function(e){return o(e)||r(e)||a()}},3589:function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e){return!0===e||"true"===e}var t=["AT","BE","BG","CH","CY","CZ","DE","DK","EE","EL","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK"];function o(e){var n=e.cookiePolicyVersion,o=e.hasConsented,r=e.isCookieConsentEnabled,a=e.isEuroIp,i=e.merchantCountryCode,s=e.userCountryCode;if(!r)return!0;var c=function(e){var n=e.isEuroIp,o=e.merchantCountryCode,r=e.userCountryCode;if(n)return!0;for(var a=0;a<t.length;a++){var i=t[a];if(r===i||o===i)return!0}return!1}({isEuroIp:a,merchantCountryCode:i,userCountryCode:s});return c?Boolean(o&&o.optedIn&&parseInt(o.policyVersion,10)===n):!o||o.optedIn}var r=function(){return""};var a={error:function(e,t){0},warn:function(e,t){0}},i={ermEnabled:function(e){return JSON.parse(decodeURIComponent(e))},hasConsented:function(e){return JSON.parse(decodeURIComponent(e))},remember_me:function(e){return JSON.parse(atob(e))},ssiEnabled:function(e){return JSON.parse(decodeURIComponent(e))}};function s(e){var t=RegExp("".concat(e,"=.[^;]*")),n=document.cookie.match(t);if(n){var o=n[0].split("=")[1];if(o){var s=o;if(function(e){return Boolean(i[e])}(e))try{s=i[e](o)}catch(t){a.error(r,{name:e})}return s}}return null}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]".concat(t,"=([^&#]*)")),o=n.exec(e);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}var u=n(3589),l=n.n(u),d=n(7358),p=n.n(d),f="--",m="+-+-+";function y(e){var t=e.split(f),n=p()(t),o=n[0],r=n.slice(1),a=[],i="";return r.forEach((function(e){i&&(e=i+f+e);try{var t=JSON.parse(e);a.push(t),i=""}catch(t){i=e}})),a.length?{data:a[0],error:a[1]||null,sdkOptions:a[2]||null,type:o}:null}function b(e){return e&&null!==e.data&&void 0!==e.data?"object"===l()(e.data)?e.data:"{"===e.data.charAt(0)||"["===e.data.charAt(0)?JSON.parse(e.data):function(e){return-1!==e.data.indexOf(m)?e.data.split(m).map(y).filter(Boolean):-1!==e.data.indexOf(f)?y(e.data):null}(e):null}n(875),n(4203);function v(e){for(var t=[],n=0,o=Object.keys(e);n<o.length;n++){var r=o[n],a=e[r];null!=a&&t.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(a.toString())))}return"?".concat(t.join("&"))}var I=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}();function g(e){return{getItem:function(t){if(!I)return null;var n=window[e].getItem(t);return n&&function(e){return"thmData"===e}(t)?JSON.parse(n):n},removeItem:function(t){I&&window[e].removeItem(t)},setItem:function(t,n){if(I){var o="string"==typeof n?n:JSON.stringify(n);window[e].setItem(t,o)}}}}var h=g("sessionStorage"),C=g("localStorage");function S(e,t){var n,o,r,a="GET";"string"==typeof e?r=e:(n=e.body,a=e.method||"GET",o=e.headers,r=e.url);var i=new XMLHttpRequest;if(i.open(a,r,!0),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Content-type","application/json"),o)for(var s in o)i.setRequestHeader(s,o[s]);t&&(i.onreadystatechange=function(){4===i.readyState&&t({data:200===i.status?JSON.parse(i.responseText):null,getResponseHeader:i.getResponseHeader.bind(i),status:i.status})}),void 0===n?i.send():i.send(JSON.stringify(n))}function E(e){var t=parseInt(e,10);return!isNaN(t)&&0!==t&&t>=Date.now()}function w(){return document.cookie.indexOf("ermEnabled")>-1}function O(){var e=s("ssiEnabled"),t=s("ssiDeclined");return e&&E(e.date)?"OPTED_IN":t&&E(t)?"OPTED_OUT":null}function T(){var e=window.location,t=e.host,n=e.origin,o=e.port,r=e.protocol;return n||"".concat(r,"//").concat(t).concat(o?":".concat(o):"")}var x=function(){var e=window.VISA_GLOBALS.splunkLoggingProbabilityValue;return!(Math.floor(100*Math.random())+1>e)},R=window.VISA_GLOBALS,D=window.location.search,k=c(D,"apikey"),A=c(D,"countryCode"),P=c(D,"parentUrl").split("/",3).join("/"),L="".concat(T(),"/logging/logEvent"),_=x(),N=R.correlationId,U=h.getItem("visitId")||"VID_".concat(N),j={API_KEY:k,"X-CORRELATION-ID":N,"X-MERCHANT-API-KEY":k},V=O(),J=w(),M={alwaysRemember:"true"===s("alwaysRemember"),browserLocale:R.browserLocale,cookieCountry:s("country_preference"),cookieLocale:s("locale"),cookiePolicyVersion:R.cookiePolicyVersion,correlationId:N,countryCodeFromIp:R.countryCodeFromIp,enableSVGInternal:e(R.enableSVGInternal),gtmUserType:s("remember_me")?"Recognized-Username":C.getItem("startingTab")||s("_art")?"Recognized":"Unrecognized",hasConsented:s("hasConsented"),isCAuthEnabled:"true"===s("iscAuthEnabled"),isCookieConsentEnabled:e(R.isCookieConsentEnabled),isEuroIp:R.isEuroIp,isInternalIp:R.isInternalIp,isRemembered:Boolean(s("remember_me")&&s("_art")),isSplunkLoggingEnabled:_,isTokenizationEnabled:e(R.isTokenizationEnabled),isVsbEnabled:e(R.isVsbEnabled),rememberMeType:J?"ERM":"legacy",rxoPopup:R.rxoPopup,showSrcTmm:"true"===R.showSrcTmm,srcEnvConfig:R.srcEnvConfig,ssiStatus:V,vdcpAbTestingWeightedProbabilityValue:R.vdcpAbTestingWeightedProbabilityValue,vdcpAddSandboxAttr:"true"===R.vdcpAddSandboxAttr,visitId:U};function H(e){var t=O(),n=w();("OPTED_IN"===t||n)&&h.setItem("thmData",{isComplete:!1,sessionId:e,startTime:Date.now()}),window.parent.postMessage({data:{ermStatus:n?"OPTED_IN":null,orgId:R.orgId,sessionId:e,ssiStatus:t},type:"visa:config:thm_data"},P)}(window.parent.postMessage({data:M,type:"visa:config:config_data"},P),"OPTED_IN"===V||J)&&(H(R.srcEnvConfig.sessionId),S({body:{CO:"JSSDK",Country:A,E:"THM",O:"JSSDK",T:"E",TS:Date.now(),U:"/wallet-services-web/xo/button.png","x-merchant-api-key":k},headers:j,method:"POST",url:L}));function K(e){switch(e.type){case"rxo:thm:complete":var t=h.getItem("thmData");t&&(t.isComplete=!0,h.setItem("thmData",t));break;case"src:thm:updateTHMIframe":H(e.data.reInitSessionId)}}window.addEventListener("message",(function(e){if(e.origin===P){var t=b(e);if(!t)return;!function(e){return"[object Array]"===Object.prototype.toString.call(e)}(t)?K(t):t.forEach(K)}}));var G=c(D,"externalClientId"),B=c(D,"externalProfileId"),F=v({country:A,formFactor:c(D,"formFactor"),locale:c(D,"locale"),profileName:B,profileOwner:G}),z="".concat(T(),"/wallet-services-web/merchant").concat(F),X=Date.now();S({body:{CO:"JSSDK",Country:A,E:"button_load",LL:"INFO",O:"JSSDK",RTY:"OUT",S:"200",T:"E",TS:Date.now(),U:"/wallet-services-web/xo/button.png",XCL:G,"x-merchant-api-key":k},headers:j,method:"POST",url:L}),S({body:{CO:"JSSDK",Country:A,E:"button_load",LL:"INFO",O:"JSSDK",RTY:"OUT",S:"200",T:"E",TS:Date.now(),U:"/wallet-services-web/xo/button.png",XCL:G,"x-merchant-api-key":k},headers:j,method:"POST",url:L}),S({headers:j,method:"GET",url:z},(function(e){var t,n,r=e.data;o({cookiePolicyVersion:M.cookiePolicyVersion,hasConsented:M.hasConsented,isCookieConsentEnabled:M.isCookieConsentEnabled,isEuroIp:M.isEuroIp,merchantCountryCode:null!==(t=null==r||null===(n=r.merchantConfig)||void 0===n?void 0:n.merchantCountryCode)&&void 0!==t?t:null,userCountryCode:M.cookieCountry})&&(h.setItem("visitId",U),h.setItem("correlationId",N));var a={data:{end:Date.now(),start:X},type:"visa:config:gtm_metrics"},i={response:{data:r,status:e.status},type:"visa:config:merchant_config_response"};window.parent.postMessage([a,i],P)}))}()}();
//# sourceMappingURL=config-v2.js.map?e8d12adc53a94a76851d